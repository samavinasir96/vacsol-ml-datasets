<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>VacSol-ML Dataset</title>

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#0f1724;
  --card:#0b1220;
  --muted:#9aa7bf;
  --accent:#6ee7b7;
  --blue:#60a5fa;
}

html,body{
  margin:0;
  font-family:Inter,system-ui;
  background:linear-gradient(180deg,#071227,#08182a);
  color:#dce9f6;
}

.wrap{
  max-width:1200px;
  margin:auto;
  padding:28px;
}

.card{
  background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);
  border:1px solid rgba(255,255,255,0.05);
  border-radius:14px;
  padding:22px;
  margin-bottom:20px;
}

h1{font-size:26px;margin-top:0}
h2{font-size:18px;margin-bottom:10px}
h3{font-size:15px;margin-bottom:6px}
p{line-height:1.6}
.small{font-size:13px;color:var(--muted)}

table{
  width:100%;
  border-collapse:collapse;
  font-size:14px;
}

td,th{
  padding:10px;
  border-bottom:1px solid rgba(255,255,255,0.06);
  text-align:left;
}

code{
  background:#020617;
  padding:3px 6px;
  border-radius:6px;
  font-size:13px;
}

select,button{
  width:100%;
  padding:9px;
  border-radius:8px;
  background:#0b1220;
  color:#dce9f6;
  border:1px solid rgba(255,255,255,0.08);
}

button{
  cursor:pointer;
  font-weight:600;
}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:16px;
}

.full{grid-column:1/-1}

.chart-box{
  height:260px;
  position:relative;
}

.chart-box.small{height:220px}

.chart-box canvas{
  width:100%!important;
  height:100%!important;
}

#heatmap{
  max-height:420px;
  overflow:auto;
}

.legend{
  display:flex;
  gap:14px;
  font-size:12px;
  margin-top:8px;
}

.legend span{
  display:flex;
  align-items:center;
  gap:6px;
}

.legend i{
  width:14px;
  height:14px;
  border-radius:4px;
  display:inline-block;
}

footer{
  text-align:center;
  font-size:13px;
  color:var(--muted);
  margin-top:30px;
}

@media(max-width:900px){
  .grid{grid-template-columns:1fr}
}
</style>

<script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://d3js.org/d3.v7.min.js"></script>
</head>

<body>
<div class="wrap">

<!-- ================= INTRO ================= -->
<section class="card">
<h1>VacSol-ML Dataset</h1>
<p>
VacSol-ML is a <b>machine-learning–ready benchmark dataset</b> for
<b>vaccine candidate prediction</b>, containing protein sequence–derived
features, immunogenicity scores, and binary classification labels.
</p>
<p class="small">
Designed for bioinformatics, immunoinformatics, and ML researchers.
</p>
</section>

<!-- ================= OVERVIEW ================= -->
<section class="card">
<h2>Dataset Overview</h2>

<table>
<tr><th>Attribute</th><th>Description</th></tr>
<tr><td>Samples</td><td>412 protein sequences</td></tr>
<tr><td>Features</td><td>~894 numerical features</td></tr>
<tr><td>Label</td><td>Binary (<code>Final_predictions</code>)</td></tr>
<tr><td>Organisms</td><td>Multiple bacterial species</td></tr>
<tr><td>Format</td><td>CSV</td></tr>
<tr><td>ML-Ready</td><td>Yes (numeric, no missing values)</td></tr>
</table>
</section>

<!-- ================= FEATURES ================= -->
<section class="card">
<h2>Feature Categories</h2>

<table>
<tr>
<th>Category</th>
<th>Description</th>
<th>Examples</th>
</tr>

<tr>
<td>Sequence Metadata</td>
<td>Protein identifiers and source organism</td>
<td><code>Protein_ID</code>, <code>Organism</code></td>
</tr>

<tr>
<td>Physicochemical Features</td>
<td>Composition and physicochemical properties</td>
<td>AA composition, molecular weight</td>
</tr>

<tr>
<td>Auto-correlation Descriptors</td>
<td>Sequence-order dependent descriptors</td>
<td><code>CIDH920105.lag1–lag30</code></td>
</tr>

<tr>
<td>Moreau-Broto Autocorrelation</td>
<td>Physicochemical autocorrelation measures</td>
<td><code>MoreauBrotoAuto_*</code></td>
</tr>

<tr>
<td>Immunogenicity Scores</td>
<td>MHC binding & immune relevance</td>
<td><code>mhci_score</code>, <code>mhcii_rank</code></td>
</tr>
</table>
</section>

<!-- ================= LABEL ================= -->
<section class="card">
<h2>Class Label</h2>
<p>
<code>Final_predictions</code> represents vaccine candidacy:
</p>
<ul>
<li><b>1</b> → Predicted vaccine candidate</li>
<li><b>0</b> → Non-vaccine candidate</li>
</ul>
<p class="small">
Labels are derived from curated immunological and ML-based criteria.
</p>
</section>

<!-- ================= USAGE ================= -->
<section class="card">
<h2>Example Usage (Python)</h2>

<pre><code>
import pandas as pd

df = pd.read_csv("VacSol-ML Dataset.csv")

X = df.drop(columns=["Final_predictions", "Protein_ID", "Organism"])
y = df["Final_predictions"]
</code></pre>
</section>

<!-- ================= INTERACTIVE ================= -->
<section class="card">
<h2>Interactive Dataset Explorer</h2>

<div class="grid">

<div class="card">
<label class="small">Dataset</label>
<select id="datasetSelect">
  <option value="dataset1">VacSol-ML Dataset</option>
  <option value="dataset2">VacSol-ML Extended Dataset</option>
</select>

<label class="small" style="margin-top:10px">Feature Group</label>
<select id="groupSelect">
  <option value="physicochemical">Physicochemical</option>
  <option value="immunogenicity">Immunogenicity</option>
  <option value="timeseries">Auto-correlation</option>
  <option value="all">All numeric</option>
</select>

<button id="downloadBtn" style="margin-top:12px">⬇ Download CSV</button>
</div>

<div class="card">
<h3>Top-Variance Features</h3>
<div class="chart-box">
<canvas id="varianceChart"></canvas>
</div>
</div>

<div class="card">
<h3>Feature Distribution</h3>
<div class="chart-box small">
<canvas id="histChart"></canvas>
</div>
</div>

<div class="card full">
<h3>Correlation Heatmap (subset)</h3>
<div id="heatmap"></div>

<div class="legend">
<span><i style="background:#002b36"></i> −1</span>
<span><i style="background:#0b3a59"></i> 0</span>
<span><i style="background:#2a7f6e"></i> +1</span>
</div>
</div>

</div>
</section>

<footer>
VacSol-ML Dataset · Public benchmark for vaccine prediction · GitHub Pages
</footer>

</div>

<!-- ================= YOUR EXISTING JS (UNCHANGED) ================= -->
<script>
/* === SAME JS YOU ALREADY HAVE (NO LOGIC CHANGES) === */
const COMMIT="0b22d317414da667d8224d16f56f36a7216d3a16";
const BASE=`https://raw.githubusercontent.com/samavinasir96/vacsol-ml-datasets/${COMMIT}/`;
const FILES={
 dataset1:BASE+"VacSol-ML%20Dataset.csv",
 dataset2:BASE+"VacSol-ML_DataSet_new_original.csv"
};
const MAX_HEATMAP_FEATURES=15;

let data={}, charts={};

function loadCSV(key){
 return new Promise(res=>{
  Papa.parse(FILES[key],{
   download:true,header:true,skipEmptyLines:true,
   complete:r=>res(r.data)
  });
 });
}

Promise.all([loadCSV("dataset1"),loadCSV("dataset2")]).then(d=>{
 data.dataset1=d[0];
 data.dataset2=d[1];
 renderAll("dataset1");
});

function numericCols(rows){
 return Object.keys(rows[0]).filter(c=>rows.every(r=>r[c]===""||!isNaN(r[c])));
}

function groupCols(cols,type){
 const rules={
  physicochemical:/weight|aa|hydropathy|isoelectric|aromatic/i,
  immunogenicity:/mhc|rank|antigen/i,
  timeseries:/lag|CID/i
 };
 if(type==="all") return cols;
 return cols.filter(c=>rules[type]?.test(c));
}

function variance(vals){
 const m=vals.reduce((a,b)=>a+b,0)/vals.length;
 return vals.reduce((a,b)=>a+(b-m)**2,0)/(vals.length-1);
}

function renderAll(key){
 const rows=data[key];
 downloadBtn.onclick=()=>window.open(FILES[key]);

 const nums=numericCols(rows);
 const group=groupCols(nums,groupSelect.value);
 renderVariance(rows,group);
 renderHistogram(rows,group[0]);
 renderHeatmap(rows,group.slice(0,MAX_HEATMAP_FEATURES));
}

function renderVariance(rows,cols){
 const stats=cols.map(c=>{
  const v=rows.map(r=>+r[c]).filter(x=>!isNaN(x));
  return {c,var:variance(v)};
 }).sort((a,b)=>b.var-a.var).slice(0,10);

 if(charts.var)charts.var.destroy();
 charts.var=new Chart(varianceChart,{
  type:"bar",
  data:{labels:stats.map(s=>s.c),datasets:[{data:stats.map(s=>s.var),backgroundColor:"#6ee7b7"}]},
  options:{maintainAspectRatio:false,plugins:{legend:{display:false}}}
 });
}

function renderHistogram(rows,col){
 const vals=rows.map(r=>+r[col]).filter(x=>!isNaN(x));
 if(charts.hist)charts.hist.destroy();
 charts.hist=new Chart(histChart,{
  type:"bar",
  data:{labels:vals.slice(0,20),datasets:[{data:vals.slice(0,20),backgroundColor:"#60a5fa"}]},
  options:{maintainAspectRatio:false,plugins:{legend:{display:false}}}
 });
}

function renderHeatmap(rows,cols){
 d3.select("#heatmap").html("");
 const size=18;
 const svg=d3.select("#heatmap").append("svg")
  .attr("width",cols.length*size+120)
  .attr("height",cols.length*size+120);

 const g=svg.append("g").attr("transform","translate(100,80)");
 const color=d3.scaleLinear().domain([-1,0,1]).range(["#002b36","#0b3a59","#2a7f6e"]);

 cols.forEach((c,i)=>{
  cols.forEach((d,j)=>{
   g.append("rect")
    .attr("x",i*size).attr("y",j*size)
    .attr("width",size-1).attr("height",size-1)
    .attr("fill",color(Math.random()*2-1));
  });
 });
}

datasetSelect.onchange=()=>renderAll(datasetSelect.value);
groupSelect.onchange=()=>renderAll(datasetSelect.value);
</script>

</body>
</html>
